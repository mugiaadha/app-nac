<div class="profile-page">
  <div class="content-card mb-4">
    <div class="card-header d-flex justify-content-between align-items-center">
      <h4 class="mb-0"><i class="bi bi-person-circle me-2"></i>My Profile</h4>
      <button
        *ngIf="!isEditing"
        (click)="toggleEdit()"
        class="btn btn-primary-gradient btn-sm"
      >
        <i class="bi bi-pencil me-1"></i>Edit Profile
      </button>
    </div>
    <div class="card-body">
      <div class="row">
        <div class="col-md-4 text-center">
          <div class="profile-avatar-large mb-3">
            <img
              *ngIf="user?.photo"
              [src]="user?.photo"
              alt="Profile"
              class="rounded-circle"
            />
            <i
              *ngIf="!user?.photo"
              class="bi bi-person-circle text-primary-gradient default-avatar-large"
            ></i>
          </div>
          <button *ngIf="isEditing" class="btn btn-outline-primary btn-sm">
            <i class="bi bi-camera me-1"></i>Change Photo
          </button>
        </div>
        <div class="col-md-8">
          <div class="row g-3">
            <div class="col-md-6">
              <label class="form-label">Full Name</label>
              <input
                *ngIf="isEditing"
                type="text"
                class="form-control"
                [(ngModel)]="editedUser.name"
              />
              <p *ngIf="!isEditing" class="form-text">{{ user?.name }}</p>
            </div>
            <div class="col-md-6">
              <label class="form-label">Email</label>
              <input
                *ngIf="isEditing"
                type="email"
                class="form-control"
                [(ngModel)]="editedUser.email"
              />
              <p *ngIf="!isEditing" class="form-text">{{ user?.email }}</p>
            </div>
            <div class="col-md-6">
              <label class="form-label">Phone</label>
              <input
                *ngIf="isEditing"
                type="tel"
                class="form-control"
                [(ngModel)]="editedUser.phone"
                placeholder="Enter phone number"
              />
              <p *ngIf="!isEditing" class="form-text">
                {{ user?.phone || "Not provided" }}
              </p>
            </div>
            <div class="col-md-6">
              <label class="form-label">Role</label>
              <p class="form-text">
                <span class="badge bg-malibu-beach">{{
                  user?.role | titlecase
                }}</span>
              </p>
            </div>
            <div class="col-12">
              <label class="form-label">Bio</label>
              <textarea
                *ngIf="isEditing"
                class="form-control"
                rows="3"
                [(ngModel)]="editedUser.bio"
                placeholder="Tell us about yourself"
              ></textarea>
              <p *ngIf="!isEditing" class="form-text">
                {{ user?.bio || "No bio provided" }}
              </p>
            </div>
          </div>

          <div *ngIf="isEditing" class="mt-3">
            <button (click)="saveProfile()" class="btn btn-success me-2">
              <i class="bi bi-check-lg me-1"></i>Save Changes
            </button>
            <button (click)="cancelEdit()" class="btn btn-secondary">
              <i class="bi bi-x-lg me-1"></i>Cancel
            </button>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- Learning Stats -->
  <div class="content-card">
    <div class="card-header">
      <h5 class="mb-0">
        <i class="bi bi-graph-up me-2"></i>Learning Statistics
      </h5>
    </div>
    <div class="card-body">
      <div class="row g-4">
        <div class="col-md-3 col-sm-6">
          <div class="stat-item text-center">
            <div class="stat-number text-primary-gradient">24</div>
            <div class="stat-label">Courses Enrolled</div>
          </div>
        </div>
        <div class="col-md-3 col-sm-6">
          <div class="stat-item text-center">
            <div class="stat-number text-success">12</div>
            <div class="stat-label">Courses Completed</div>
          </div>
        </div>
        <div class="col-md-3 col-sm-6">
          <div class="stat-item text-center">
            <div class="stat-number text-warning">8</div>
            <div class="stat-label">Certificates Earned</div>
          </div>
        </div>
        <div class="col-md-3 col-sm-6">
          <div class="stat-item text-center">
            <div class="stat-number text-info">156</div>
            <div class="stat-label">Learning Hours</div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
